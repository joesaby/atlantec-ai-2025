---
import Layout from '../layouts/Layout.astro';
import { sustainablePractices } from '../data/sustainability-metrics';
import SustainabilityDashboard from '../components/sustainability/SustainabilityDashboard';
import ResourceUsageTracker from '../components/sustainability/ResourceUsageTracker';
import SustainabilityPractices from '../components/sustainability/SustainabilityPractices';
import SeasonalSustainabilityTips from '../components/sustainability/SeasonalSustainabilityTips';
import SustainabilityAchievements from '../components/sustainability/SustainabilityAchievements';
import CarbonFootprintCalculator from '../components/sustainability/CarbonFootprintCalculator';
import BiodiversityImpact from '../components/sustainability/BiodiversityImpact';
import BiodiversityTracker from '../components/sustainability/BiodiversityTracker';
import WaterUsageInsights from '../components/sustainability/WaterUsageInsights';
import SustainabilityEducation from '../components/sustainability/SustainabilityEducation';
import FoodSustainabilityComparison from '../components/sustainability/FoodSustainabilityComparison';
import SDGImpactVisualization from '../components/sustainability/SDGImpactVisualization';
---

<Layout title="Sustainability Tracker - Irish Garden Assistant">
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-center mb-2">Sustainability Tracker</h1>
    <p class="text-center mb-8 max-w-2xl mx-auto">
      Monitor your garden's environmental impact and improve your sustainability 
      practices with personalized recommendations for Irish gardening conditions.
    </p>
    
    <!-- Navigation tabs for better organization -->
    <div class="tabs tabs-boxed justify-center mb-8">
      <a class="tab tab-active" data-tab="dashboard">Dashboard</a>
      <a class="tab" data-tab="resources">Impact & Resources</a>
      <a class="tab" data-tab="biodiversity">Biodiversity</a>
      <a class="tab" data-tab="practices">Your Practices</a>
      <a class="tab" data-tab="education">Learn More</a>
    </div>
    
    <!-- Dashboard Section -->
    <div id="dashboard-section" class="tab-content active mb-16">
      <!-- Sustainability Dashboard -->
      <div class="mb-8">
        <SustainabilityDashboard client:load />
      </div>
      
      <!-- Seasonal Tips and Monthly Challenge -->
      <SeasonalSustainabilityTips client:load />
      
      <!-- Sustainability Achievements -->
      <SustainabilityAchievements client:load />
    </div>
    
    <!-- Resources Section -->
    <div id="resources-section" class="tab-content hidden mb-16">
      <h2 class="text-2xl font-bold mb-6 text-center">UN SDGs & Resource Management</h2>
      
      <!-- UN SDG Impact Visualization -->
      <SDGImpactVisualization client:load />
      
      <!-- Carbon Footprint Calculator -->
      <CarbonFootprintCalculator client:load />
      
      <!-- Food Sustainability Comparison -->
      <FoodSustainabilityComparison client:load />
      
      <!-- Water Usage Insights -->
      <WaterUsageInsights client:load />
      
      <!-- Resource Usage Tracker -->
      <ResourceUsageTracker client:load />
    </div>
    
    <!-- Biodiversity Section -->
    <div id="biodiversity-section" class="tab-content hidden mb-16">
      <h2 class="text-2xl font-bold mb-6 text-center">Biodiversity Impact</h2>
      
      <!-- Biodiversity Score Tracker -->
      <div class="mb-8">
        <BiodiversityImpact client:load />
      </div>
    </div>
    
    <!-- Practices Section -->
    <div id="practices-section" class="tab-content hidden mb-16">
      <h2 class="text-2xl font-bold mb-6 text-center">Sustainable Gardening Practices</h2>
      
      <!-- Sustainable Practices Categories -->
      <SustainabilityPractices client:load />
    </div>
    
    <!-- Education Section -->
    <div id="education-section" class="tab-content hidden mb-16">
      <h2 class="text-2xl font-bold mb-6 text-center">Learn About Sustainability</h2>
      
      <!-- Educational Content -->
      <SustainabilityEducation client:load />
    
      <div class="mt-12 bg-base-200 p-6 rounded-lg">
        <h3 class="text-xl font-bold mb-4">About Irish Sustainable Gardening</h3>
        <p class="mb-4">
          Sustainable gardening in Ireland takes advantage of the unique climate and growing 
          conditions while preserving the rich biodiversity and natural resources of the island.
        </p>
        <p class="mb-4">
          With abundant rainfall (1000+ mm annually in most regions), water conservation may seem 
          less critical than in other countries, but proper management during increasingly common 
          dry spells is becoming important. Ireland's mild, maritime climate allows year-round 
          growing with proper planning.
        </p>
        <p class="mb-4">
          The protection of Ireland's peatlands is a particular sustainability focus, as these 
          environments serve as valuable carbon sinks and unique habitats. Using peat-free gardening 
          methods helps preserve these important ecosystems.
        </p>
      </div>
      
      <!-- SDG Education Section -->
      <div class="mt-8 bg-base-200 p-6 rounded-lg">
        <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
          <span class="text-2xl">üåç</span> 
          UN Sustainable Development Goals
        </h3>
        <p class="mb-4">
          The United Nations Sustainable Development Goals (SDGs) are 17 interconnected global goals 
          designed to be a "blueprint for achieving a better and more sustainable future for all" by 2030. 
          Home gardening contributes to several of these goals:
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div class="card bg-base-100">
            <div class="card-body p-4">
              <h4 class="card-title text-sm flex items-center gap-2">
                <span class="text-xl">üå±</span> Environmental Impact
              </h4>
              <ul class="list-disc pl-5 text-sm">
                <li><strong>SDG 13 (Climate Action):</strong> Home gardens reduce food miles and carbon footprint</li>
                <li><strong>SDG 15 (Life on Land):</strong> Organic gardening protects soil health and biodiversity</li>
                <li><strong>SDG 6 (Clean Water):</strong> Rainwater harvesting and reduced chemical use protect water resources</li>
              </ul>
            </div>
          </div>
          
          <div class="card bg-base-100">
            <div class="card-body p-4">
              <h4 class="card-title text-sm flex items-center gap-2">
                <span class="text-xl">‚ù§Ô∏è</span> Health & Wellbeing
              </h4>
              <ul class="list-disc pl-5 text-sm">
                <li><strong>SDG 2 (Zero Hunger):</strong> Home food production increases food security</li>
                <li><strong>SDG 3 (Good Health):</strong> Gardening provides exercise and fresh, nutritious food</li>
                <li><strong>SDG 11 (Sustainable Communities):</strong> Green spaces improve community wellbeing</li>
              </ul>
            </div>
          </div>
          
          <div class="card bg-base-100">
            <div class="card-body p-4">
              <h4 class="card-title text-sm flex items-center gap-2">
                <span class="text-xl">üíº</span> Economic Benefits
              </h4>
              <ul class="list-disc pl-5 text-sm">
                <li><strong>SDG 12 (Responsible Consumption):</strong> Growing your own reduces packaging waste</li>
                <li><strong>SDG 8 (Decent Work):</strong> Local gardening can support local economies</li>
                <li><strong>SDG 7 (Affordable Energy):</strong> Strategic planting can reduce home energy costs</li>
              </ul>
            </div>
          </div>
          
          <div class="card bg-base-100">
            <div class="card-body p-4">
              <h4 class="card-title text-sm">Track Your SDG Impact</h4>
              <p class="text-sm">Your garden's impact on these goals is tracked in the SDG Impact Visualization section. Increase your impact by:</p>
              <ul class="list-disc pl-5 text-sm mt-2">
                <li>Growing more diverse crops and plants</li>
                <li>Using sustainable practices like rainwater harvesting</li>
                <li>Sharing surplus produce with your community</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="text-center">
          <a href="#resources-section" class="btn btn-primary btn-sm" onclick="document.querySelector('.tab[data-tab=resources]').click()">
            View Your SDG Impact
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <style>
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* Enhanced styles for biodiversity tracker */
    .radial-progress {
      transition: value 1s ease-in-out;
    }
    
    .badge {
      transition: all 0.3s ease;
    }
    
    .badge:hover {
      transform: scale(1.05);
    }
    
    #biodiversity-section .bg-base-100:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
    }
  </style>
  
  <script>
    // Tab navigation functionality
    document.addEventListener('DOMContentLoaded', () => {
      const tabs = document.querySelectorAll('.tabs .tab');
      const tabContents = document.querySelectorAll('.tab-content');
      
      // Function to show a specific tab
      function showTab(tabId: string) {
        // Hide all tab contents
        tabContents.forEach(content => {
          content.classList.remove('active');
          content.classList.add('hidden');
        });
        
        // Show the selected tab content
        const selectedContent = document.getElementById(tabId + '-section');
        if (selectedContent) {
          selectedContent.classList.remove('hidden');
          selectedContent.classList.add('active');
        }
        
        // Update active tab
        tabs.forEach(tab => {
          tab.classList.remove('tab-active');
          if (tab.getAttribute('data-tab') === tabId) {
            tab.classList.add('tab-active');
          }
        });
      }
      
      // Add click event listeners to tabs
      tabs.forEach(tab => {
        tab.addEventListener('click', (e) => {
          e.preventDefault();
          const tabId = tab.getAttribute('data-tab') || '';
          if (tabId) {
            showTab(tabId);
            
            // Update URL with hash for direct linking
            window.history.replaceState(null, '', '#' + tabId);
          }
        });
      });
      
      // Check for hash in URL to open specific tab on page load
      if (window.location.hash) {
        const tabId = window.location.hash.substring(1);
        const tabElement = document.querySelector(`.tab[data-tab="${tabId}"]`);
        if (tabElement) {
          showTab(tabId);
        }
      }
    });
  </script>
</Layout>